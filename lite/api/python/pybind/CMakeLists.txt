set(PYBIND_DEPS pybind python paddle_api_light paddle_api)
if (NOT LITE_ON_TINY_PUBLISH)
   set(PYBIND_DEPS ${PYBIND_DEPS} paddle_api_full opt_base)
endif()

if(WIN32)
   get_property(static_libs_deps GLOBAL PROPERTY STATIC_LIBS_DEPS )
   lite_cc_library(lite_pybind  SHARED SRCS pybind.cc DEPS ${PYBIND_DEPS} ${static_libs_deps})
  # bundle_static_library(lite_pybind lite_pybind_bundled bundle_lite_pybind)
  get_property(static_libs_deps GLOBAL PROPERTY STATIC_LIBS_DEPS )
  # list(REMOVE_ITEM  static_libs_deps lite_pybind)
  # target_link_libraries(lite_pybind shlwapi.lib lite_pybind_bundled)
  get_property (os_dependency_modules GLOBAL PROPERTY OS_DEPENDENCY_MODULES)
  target_link_libraries(lite_pybind ${os_dependency_modules})
   message("--------------${static_libs_deps}--------------")
else()
   lite_cc_library(lite_pybind SHARED SRCS pybind.cc DEPS ${PYBIND_DEPS})
endif(WIN32)

if (LITE_ON_TINY_PUBLISH)
   set_target_properties(lite_pybind PROPERTIES COMPILE_FLAGS "-flto -fdata-sections")
endif()
