if (NOT LITE_WITH_INTELFPGA)
    return()
endif()

set(LITE_INTELFPGA_PATH "${PADDLE_SOURCE_DIR}/lite/backends/intelfpga")
set(LITE_INTELFPGA_LLDRV_PATH "${PADDLE_SOURCE_DIR}/lite/backends/intelfpga/lldrv")

message("intelfpga_path ${LITE_INTELFPGA_PATH}")
file(GLOB INTELFPGA_CPP "${LITE_INTELFPGA_PATH}/*.cpp")
file(GLOB LLDRV_CPP "${LITE_INTELFPGA_LLDRV_PATH}/*.cpp")
message("intelfpga cpp: ${INTELFPGA_CPP}")
set(INTELFPGA_ALL_CPP "")
FOREACH(FILE_PATH ${LLDRV_CPP})
    STRING(REGEX REPLACE ".+/(.+\\..*)" "\\1" FILE_NAME ${FILE_PATH})
    list(APPEND INTELFPGA_ALL_CPP lldrv/${FILE_NAME})
ENDFOREACH(FILE_PATH)
FOREACH(FILE_PATH ${INTELFPGA_CPP})
    STRING(REGEX REPLACE ".+/(.+\\..*)" "\\1" FILE_NAME ${FILE_PATH})
    list(APPEND INTELFPGA_ALL_CPP ${FILE_NAME})
ENDFOREACH(FILE_PATH)
message("intelfpga src: ${INTELFPGA_ALL_CPP}")
cc_library(kernel_intelfpga SRCS ${INTELFPGA_ALL_CPP})
cc_library(intelfpga_target_wrapper SRCS target_wrapper.cpp DEPS kernel_intelfpga)
